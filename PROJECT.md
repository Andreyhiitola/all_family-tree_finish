# üìò PROJECT.md ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ "–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ" –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. [–ú–æ–¥—É–ª–∏ –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏](#–º–æ–¥—É–ª–∏-–∏-–∏—Ö-—Ñ—É–Ω–∫—Ü–∏–∏)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
4. [–ê–ª–≥–æ—Ä–∏—Ç–º—ã](#–∞–ª–≥–æ—Ä–∏—Ç–º—ã)
5. [–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏](#—Å–∏—Å—Ç–µ–º–∞-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
6. [API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#api-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
7. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           index.html (UI)               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Core     ‚îÇ  ‚îÇ  UI Components   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ DataMgr   ‚îÇ  ‚îÇ  app.js          ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ FamilyTree‚îÇ  ‚îÇ  forms.js        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ TreeVis   ‚îÇ  ‚îÇ  table.js        ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ProfileModal.js ‚îÇ   ‚îÇ
‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Utils    ‚îÇ  ‚îÇ  Auth & Sync     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Excel I/O ‚îÇ  ‚îÇ  auth.js         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Storage   ‚îÇ  ‚îÇ  GitHubSync.js   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ       LocalStorage     GitHub API       ‚îÇ
‚îÇ       data/people.json                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã

- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:** Core ‚Üí Logic, UI ‚Üí View, Utils ‚Üí Helpers
- **Event-driven:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–≤—è–∑–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Stateless UI:** UI –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç

---

## üß© –ú–æ–¥—É–ª–∏ –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏

### Core

#### `DataManager.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```javascript
class DataManager {
  loadFromJSON()           // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ data/people.json
  savePeople(people)       // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage
  getPeople()              // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ª—é–¥–µ–π
  getPersonById(id)        // –ü–æ–ª—É—á–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ ID
  addPerson(person)        // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
  updatePerson(id, data)   // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ–ª–æ–≤–µ–∫–∞
  deletePerson(id)         // –£–¥–∞–ª–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞
  getPhotoUrl(photo)       // –ü–æ–ª—É—á–∏—Ç—å URL —Ñ–æ—Ç–æ
  getGalleryUrls(photos)   // –ü–æ–ª—É—á–∏—Ç—å URL –≥–∞–ª–µ—Ä–µ–∏
  clearCache()             // –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –≤–µ—Ä—Å–∏–π
}
```

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤: `?v=1.0.5`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

#### `FamilyTree.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ–º–µ–π–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```javascript
class FamilyTree {
  getPersonById(id)                    // –ü–æ–ª—É—á–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞
  getChildrenOf(personId)              // –î–µ—Ç–∏ —á–µ–ª–æ–≤–µ–∫–∞
  getChildrenOfCouple(p1, p2)          // –î–µ—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä—ã
  getAllSpouses(personId)              // –í—Å–µ —Å—É–ø—Ä—É–≥–∏ (—Ç–µ–∫—É—â–∏–µ + –±—ã–≤—à–∏–µ)
  buildDescendantsHierarchy(rootId)    // –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ –ø–æ—Ç–æ–º–∫–æ–≤
  getSpousePairs()                     // –í—Å–µ –ø–∞—Ä—ã —Å—É–ø—Ä—É–≥–æ–≤
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º `buildDescendantsHierarchy`:**
```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å—Ç—å –ª–∏ —É —á–µ–ª–æ–≤–µ–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—É–ø—Ä—É–≥–æ–≤
const spouses = this.getAllSpouses(personId)

// 2. –ï—Å–ª–∏ —Å—É–ø—Ä—É–≥–æ–≤ > 1 ‚Üí —Å–æ–∑–¥–∞—Ç—å —É–∑–µ–ª-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (separator)
if (spouses.length > 1) {
  const separatorNode = {
    type: 'separator',
    person: {...},
    children: []
  }
  
  // 3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—É–ø—Ä—É–≥–∞ —Å–æ–∑–¥–∞—Ç—å —É–∑–µ–ª –±—Ä–∞–∫–∞ (marriage)
  spouses.forEach(spouse => {
    const marriageNode = {
      type: 'marriage',
      person1: {...},
      person2: {...},
      children: []
    }
    
    // 4. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–µ–π –¢–û–õ–¨–ö–û –æ—Ç —ç—Ç–æ–π –ø–∞—Ä—ã
    const children = this.getChildrenOfCouple(personId, spouse.id)
    
    // 5. –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–¥–µ—Ä–µ–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞
    children.forEach(child => {
      marriageNode.children.push(buildFamilyNode(child, depth + 1))
    })
    
    separatorNode.children.push(marriageNode)
  })
  
  return separatorNode
}

// 6. –ï—Å–ª–∏ —Å—É–ø—Ä—É–≥ –æ–¥–∏–Ω ‚Üí –æ–±—ã—á–Ω—ã–π —É–∑–µ–ª —Å–µ–º—å–∏ (family)
const familyNode = {
  type: 'family',
  person1: {...},
  person2: {...},
  children: []
}
```

**–ú–µ—Ç–æ–¥ `getAllSpouses`:**
```javascript
getAllSpouses(personId) {
  const spouses = []
  const person = this.getPersonById(personId)
  
  // 1. –¢–µ–∫—É—â–∏–π —Å—É–ø—Ä—É–≥ –∏–∑ spouseId
  if (person?.spouseId) {
    spouses.push(this.getPersonById(person.spouseId))
  }
  
  // 2. –ë—ã–≤—à–∏–µ —Å—É–ø—Ä—É–≥–∏ —á–µ—Ä–µ–∑ –¥–µ—Ç–µ–π
  const children = this.getChildrenOf(personId)
  children.forEach(child => {
    const otherId = person.gender === "M" ? child.motherId : child.fatherId
    if (otherId && otherId !== person.spouseId) {
      const other = this.getPersonById(otherId)
      if (other && !spouses.find(s => s.id === other.id)) {
        spouses.push(other)
      }
    }
  })
  
  return spouses.filter(s => s)
}
```

**–ú–µ—Ç–æ–¥ `getChildrenOfCouple`:**
```javascript
getChildrenOfCouple(person1Id, person2Id) {
  if (!person2Id) {
    return this.getChildrenOf(person1Id) // –í—Å–µ –¥–µ—Ç–∏ –µ—Å–ª–∏ —Å—É–ø—Ä—É–≥–∞ –Ω–µ—Ç
  }
  
  const person1 = this.getPersonById(person1Id)
  const children = this.getChildrenOf(person1Id)
  
  // –§–∏–ª—å—Ç—Ä—É–µ–º: —Ç–æ–ª—å–∫–æ –¥–µ—Ç–∏ –æ—Ç –≠–¢–û–ô –ø–∞—Ä—ã
  return children.filter(child => {
    if (person1.gender === "M") {
      return child.fatherId === person1Id && child.motherId === person2Id
    } else {
      return child.motherId === person1Id && child.fatherId === person2Id
    }
  })
}
```

#### `TreeVisualizer.js`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞ —Å –ø–æ–º–æ—â—å—é D3.js

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```javascript
class TreeVisualizer {
  render(rootId)           // –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –¥–µ—Ä–µ–≤–æ –æ—Ç –∫–æ—Ä–Ω—è
  drawPerson(container,    // –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å —É–∑–µ–ª —á–µ–ª–æ–≤–µ–∫–∞
             offsetX, 
             dataAccessor)
}
```

**–¢–∏–ø—ã —É–∑–ª–æ–≤:**
```javascript
// type: 'family' - –æ–±—ã—á–Ω–∞—è —Å–µ–º—å—è (–º—É–∂ + –∂–µ–Ω–∞ + –¥–µ—Ç–∏)
{
  type: 'family',
  person1: {...},   // –û—Å–Ω–æ–≤–Ω–æ–π —á–µ–ª–æ–≤–µ–∫
  person2: {...},   // –°—É–ø—Ä—É–≥
  children: [...]   // –î–µ—Ç–∏
}

// type: 'separator' - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±—Ä–∞–∫–æ–≤
{
  type: 'separator',
  person: {...},    // –ß–µ–ª–æ–≤–µ–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±—Ä–∞–∫–∞–º–∏
  children: [...]   // –ú–∞—Å—Å–∏–≤ marriage —É–∑–ª–æ–≤
}

// type: 'marriage' - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—Ä–∞–∫
{
  type: 'marriage',
  person1: {...},
  person2: {...},
  children: [...]   // –î–µ—Ç–∏ –æ—Ç –≠–¢–û–ì–û –±—Ä–∞–∫–∞
}
```

**–û—Ç—Ä–∏—Å–æ–≤–∫–∞ —É–∑–ª–æ–≤:**
```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
allNodes.each((d, i, nodes) => {
  const node = d3.select(nodes[i])
  
  if (d.data.type === 'separator') {
    // –°–µ—Ä—ã–π –∫—Ä—É–∂–æ–∫-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (r=12px)
    node.append('circle')
      .attr('r', 12)
      .attr('fill', '#999999')
      .attr('stroke', '#666666')
  } 
  else if (d.data.type === 'marriage' || d.data.type === 'family') {
    // –ü–∞—Ä–∞ –ª—é–¥–µ–π (person1 –∏ person2)
    this.drawPerson(node, -25, n => n.data.person1)
    
    if (d.data.person2) {
      this.drawPerson(node, 25, n => n.data.person2)
      
      // –ö—Ä–∞—Å–Ω–∞—è –ª–∏–Ω–∏—è –±—Ä–∞–∫–∞ –º–µ–∂–¥—É —Å—É–ø—Ä—É–≥–∞–º–∏
      node.append('line')
        .attr('class', 'marriage-line')
        .attr('stroke', '#FF6B6B')
    }
  }
})
```

### UI Components

#### `app.js`
**–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
async function init()

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–µ–ª–æ–≤–µ–∫–µ
function showPersonInfo(id)

// –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
function openPersonForm(id)

// –£–¥–∞–ª–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞
function askDeletePerson(id)
function confirmDeletePerson()

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
function refreshAll()
function refreshTree()
function refreshTable()
```

#### `ProfileModal.js`
**–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è —Å –≥–∞–ª–µ—Ä–µ–µ–π**

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (prev/next)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (—Å—Ç—Ä–µ–ª–∫–∏, ESC)
- –°–∫—Ä—ã—Ç–∏–µ –¥–∞—Ç—ã —Å–º–µ—Ä—Ç–∏ –¥–ª—è –∂–∏–≤—ã—Ö –ª—é–¥–µ–π

**–ú–µ—Ç–æ–¥—ã:**
```javascript
class ProfileModal {
  open(personId)                // –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  close()                       // –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  fillBasicInfo(person)         // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
  fillGallery(person)           // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≥–∞–ª–µ—Ä–µ—é
  openPhotoModal(photoUrl)      // –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ
  closePhotoModal()             // –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ
  showNextPhoto()               // –°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ
  showPrevPhoto()               // –ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ
}
```

#### `forms.js`
**–§–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª—é–¥–µ–π**

**–§—É–Ω–∫—Ü–∏–∏:**
```javascript
function populateForm(person)    // –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏
function fillForm(person)        // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è —Ñ–æ—Ä–º—ã
function getFormData()           // –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
```

#### `table.js`
**–¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –ª—é–¥–µ–π**

**–§—É–Ω–∫—Ü–∏–∏:**
```javascript
function renderTable(people)     // –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
```

**–ö–æ–ª–æ–Ω–∫–∏:**
- ID
- –ò–º—è
- –§–∞–º–∏–ª–∏—è
- –ü–æ–ª
- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- –î–µ–π—Å—Ç–≤–∏—è: üëÅ –ü—Ä–æ—Ñ–∏–ª—å, ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, üóë –£–¥–∞–ª–∏—Ç—å

### Utils

#### `dataStorage.js`
**–†–∞–±–æ—Ç–∞ —Å LocalStorage –∏ —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç JSON**
```javascript
// –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–∞–π–ª
window.exportJsonFile = function()

// –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞
window.importJsonFile = function(event)
```

#### `importExcel.js` / `exportExcel.js`
**–ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤/–∏–∑ Excel**

**–§–æ—Ä–º–∞—Ç Excel:**
| ID | –ò–º—è | –§–∞–º–∏–ª–∏—è | –û—Ç—á–µ—Å—Ç–≤–æ | –ü–æ–ª | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è | –î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏ | ... |
|----|-----|---------|----------|-----|---------------|-------------|-----|
| 1  | –ò–≤–∞–Ω| –ò–≤–∞–Ω–æ–≤  | –ü–µ—Ç—Ä–æ–≤–∏—á | M   | 1980-05-15    |             | ... |

#### `GitHubSync.js`
**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å GitHub —á–µ—Ä–µ–∑ REST API**
```javascript
class GitHubSync {
  constructor(config)              // { token, owner, repo, branch, filePath }
  
  async fetchFile()                // –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –∏–∑ GitHub
  async updateFile(content, msg)   // –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª –≤ GitHub
  
  isEnabled()                      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  static getTokenInstructions()    // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç–æ–∫–µ–Ω–∞
}
```

**API endpoints:**
```javascript
// GET —Ñ–∞–π–ª–∞
GET https://api.github.com/repos/{owner}/{repo}/contents/{path}

// PUT (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞)
PUT https://api.github.com/repos/{owner}/{repo}/contents/{path}
{
  "message": "Update people.json",
  "content": "base64_encoded_content",
  "sha": "current_file_sha",
  "branch": "main"
}
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Person Object
```typescript
interface Person {
  id: number                // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  name: string              // –ò–º—è
  surname: string           // –§–∞–º–∏–ª–∏—è
  middlename: string        // –û—Ç—á–µ—Å—Ç–≤–æ
  gender: 'M' | 'F'         // –ü–æ–ª
  birthDate: string         // YYYY-MM-DD
  deathDate: string         // YYYY-MM-DD –∏–ª–∏ –ø—É—Å—Ç–æ
  birthPlace: string        // –ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è
  biography: string         // –¢–µ–∫—Å—Ç –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
  photo: string             // photos/avatars/–∏–º—è.jpg
  photos: string[]          // [photo, gallery1, gallery2, ...]
  fatherId: number | null   // ID –æ—Ç—Ü–∞
  motherId: number | null   // ID –º–∞—Ç–µ—Ä–∏
  spouseId: number | null   // ID —Å—É–ø—Ä—É–≥–∞/—Å—É–ø—Ä—É–≥–∏
}
```

### Tree Node Types
```typescript
// –û–±—ã—á–Ω–∞—è —Å–µ–º—å—è
type FamilyNode = {
  type: 'family'
  id: string
  person1: PersonData
  person2: PersonData | null
  children: TreeNode[]
}

// –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±—Ä–∞–∫–æ–≤
type SeparatorNode = {
  type: 'separator'
  id: string
  person: PersonData
  children: MarriageNode[]
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—Ä–∞–∫
type MarriageNode = {
  type: 'marriage'
  id: string
  person1: PersonData
  person2: PersonData
  children: TreeNode[]
}

type TreeNode = FamilyNode | SeparatorNode | MarriageNode
```

### LocalStorage Keys
```javascript
{
  "family_tree_data": JSON.stringify(people),      // –ú–∞—Å—Å–∏–≤ –ª—é–¥–µ–π
  "github_token": "ghp_xxxxx",                      // GitHub —Ç–æ–∫–µ–Ω
  "github_owner": "username",                       // GitHub username
  "github_repo": "repo-name",                       // –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ
  "auth_token": "ghp_xxxxx",                        // –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (sessionStorage)
  "auth_user": "username"                           // Username (sessionStorage)
}
```

---

## üîê –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  UI: ‚öôÔ∏è GitHub button               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ click
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  configureGitHub()                  ‚îÇ
‚îÇ  - prompt –¥–ª—è —Ç–æ–∫–µ–Ω–∞                ‚îÇ
‚îÇ  - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ localStorage.setItem('github_token')
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  auth.js: window.isAuthorized()     ‚îÇ
‚îÇ  - –ø—Ä–æ–≤–µ—Ä–∫–∞ github_token            ‚îÇ
‚îÇ  - –ø—Ä–æ–≤–µ—Ä–∫–∞ auth_token              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ authorized?
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  window.requireAuth(action)         ‚îÇ
‚îÇ  - –µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç—å     ‚îÇ
‚îÇ  - –∏–Ω–∞—á–µ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª–∫—É —Ç–æ–∫–µ–Ω–∞  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**auth.js:**
```javascript
(function() {
  let isAuthenticated = false
  let authToken = null
  let pendingAction = null

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ GitHub API
  window.verifyToken = async function() {
    const token = document.getElementById('github-token').value.trim()
    
    const response = await fetch('https://api.github.com/user', {
      headers: { 'Authorization': `token ${token}` }
    })
    
    if (response.ok) {
      const user = await response.json()
      isAuthenticated = true
      authToken = token
      
      sessionStorage.setItem('auth_token', token)
      sessionStorage.setItem('auth_user', user.login)
      
      // –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
      if (pendingAction) {
        pendingAction()
        pendingAction = null
      }
    }
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
  window.requireAuth = function(action) {
    const savedToken = sessionStorage.getItem('auth_token') || 
                       localStorage.getItem('github_token')
    
    if (savedToken && !isAuthenticated) {
      authToken = savedToken
      isAuthenticated = true
    }
    
    if (isAuthenticated) {
      action()
    } else {
      pendingAction = action
      const modal = document.getElementById('auth-modal')
      if (modal) modal.style.display = 'flex'
    }
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
  window.isAuthorized = function() {
    return isAuthenticated || 
           sessionStorage.getItem('auth_token') || 
           localStorage.getItem('github_token')
  }

  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
  const savedToken = sessionStorage.getItem('auth_token') || 
                     localStorage.getItem('github_token')
  if (savedToken) {
    authToken = savedToken
    isAuthenticated = true
  }
})()
```

### –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

**–ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `requireAuth()`:**
```javascript
// 1. –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" (modals.js)
document.getElementById('add-person').addEventListener('click', () => {
  window.requireAuth(() => app.openPersonForm(null))
})

// 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ (ui/app.js)
editBtn.onclick = () => window.requireAuth(() => app.openPersonForm(id))

// 3. –£–¥–∞–ª–µ–Ω–∏–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ
deleteBtn.onclick = () => window.requireAuth(() => app.askDeletePerson(id))

// 4. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ (ui/table.js)
btnEdit.onclick = () => {
  window.requireAuth(() => window.app.openPersonForm(person.id))
}

// 5. –£–¥–∞–ª–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ
btnDelete.onclick = () => {
  window.requireAuth(() => window.app.askDeletePerson(person.id))
}

// 6. –ò–º–ø–æ—Ä—Ç JSON (index.html)
<input onchange="window.requireAuth(() => window.importJsonFile(event))">
```

### –ü–æ–∫–∞–∑ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å"

**–õ–æ–≥–∏–∫–∞:**
```javascript
// –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
<button id="add-person" style="display: none;">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>

// –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
function toggleAddButton() {
  const addBtn = document.getElementById('add-person')
  if (!addBtn) return
  
  if (window.isAuthorized()) {
    addBtn.style.display = 'inline-block'
  } else {
    addBtn.style.display = 'none'
  }
}

// –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
document.addEventListener('DOMContentLoaded', toggleAddButton)
```

---

## üîå API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### GitHub REST API

**Endpoints:**
```
GET  /repos/{owner}/{repo}/contents/{path}
PUT  /repos/{owner}/{repo}/contents/{path}
```

**Authentication:**
```javascript
headers: {
  'Authorization': `token ${github_token}`,
  'Accept': 'application/vnd.github.v3+json'
}
```

**Pull (–∑–∞–≥—Ä—É–∑–∫–∞):**
```javascript
async function pullFromGitHub() {
  const data = await githubSync.fetchFile()
  
  if (data && data.people) {
    dataManager.savePeople(data.people)
    location.reload()
  }
}
```

**Push (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ):**
```javascript
async function pushToGitHub() {
  const people = dataManager.getPeople()
  const content = JSON.stringify({ people }, null, 2)
  const message = `Update people.json (${new Date().toLocaleString()})`
  
  await githubSync.updateFile(content, message)
}
```

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.x (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä (Chrome, Firefox, Safari, Edge)
- GitHub –∞–∫–∫–∞—É–Ω—Ç (–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)

### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Andreyhiitola/all_family-tree_finish.git
cd all_family-tree_finish

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python -m http.server 8760

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
./start-simple.sh

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:8760
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```
1. Core (–ª–æ–≥–∏–∫–∞) ‚Üí src/core/
2. UI (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) ‚Üí src/ui/
3. Utils (–ø–æ–º–æ—â–Ω–∏–∫–∏) ‚Üí src/utils/
4. Styles ‚Üí style.css, profile-modal-styles.css
5. Data ‚Üí data/people.json
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á

**–ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ "email"**

1. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö**
```javascript
// data/people.json
{
  "id": 1,
  "name": "–ò–≤–∞–Ω",
  // ...
  "email": "ivan@example.com"  // ‚Üê –Ω–æ–≤–æ–µ –ø–æ–ª–µ
}
```

2. **–î–æ–±–∞–≤–∏—Ç—å –≤ —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
```html
<!-- index.html -->
<div class="form-group">
  <label>Email:</label>
  <input type="email" id="email-input">
</div>
```

3. **–û–±–Ω–æ–≤–∏—Ç—å forms.js**
```javascript
// –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
function fillForm(person) {
  // ...
  document.getElementById('email-input').value = person.email || ''
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
function getFormData() {
  return {
    // ...
    email: document.getElementById('email-input').value
  }
}
```

4. **–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ**
```javascript
// ProfileModal.js
if (person.email) {
  basicInfo += `<p><strong>Email:</strong> ${person.email}</p>`
}
```

### –î–µ–±–∞–≥–≥–∏–Ω–≥

**–ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ª—é–¥–µ–π
window.dataManager.getPeople()

// –ù–∞–π—Ç–∏ —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ ID
window.dataManager.getPersonById(1)

// –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ
window.familyTree.buildDescendantsHierarchy(1)

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
window.isAuthorized()

// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
window.dataManager.clearCache()
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∫–æ—Ä–Ω–µ–π
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
3. ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
4. ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞
5. ‚úÖ –ò–º–ø–æ—Ä—Ç –∏–∑ Excel
6. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
7. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å GitHub (Pull/Push)
8. ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±—Ä–∞–∫–∏
9. ‚úÖ –§–æ—Ç–æ–≥–∞–ª–µ—Ä–µ–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
10. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub —Ç–æ–∫–µ–Ω

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [D3.js Documentation](https://d3js.org/)
- [SheetJS Documentation](https://docs.sheetjs.com/)
- [GitHub REST API](https://docs.github.com/en/rest)
- [LocalStorage Guide](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ–¥—É?** –°–æ–∑–¥–∞–π—Ç–µ Issue: [GitHub Issues](https://github.com/Andreyhiitola/all_family-tree_finish/issues)

**–ê–≤—Ç–æ—Ä:** Andreyhiitola  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –Ø–Ω–≤–∞—Ä—å 2026

---

## üå≥ Root Family Selector

### –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ–º—å–∏

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ–º–µ–π–Ω—ã–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ —á–µ—Ä–µ–∑ dropdown –≤ header.

**–ú–µ—Ç–æ–¥ findRootFamilies():**
```javascript
findRootFamilies() {
  // –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ª—é–¥–µ–π –±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π
  const rootPeople = this.people.filter(p => !p.fatherId && !p.motherId);
  
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å—É–ø—Ä—É–∂–µ—Å–∫–∏–µ –ø–∞—Ä—ã
  // –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è (—Å—Ç–∞—Ä—à–∏–µ –ø–µ—Ä–≤—ã–µ)
  
  return families; // [{id, person1, person2, label}, ...]
}
```

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- Dropdown: `<select id="root-selector">` –≤ header
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `window.familyTree` - —ç–∫–∑–µ–º–ø–ª—è—Ä FamilyTreeCore
- `window.treeViz` - —ç–∫–∑–µ–º–ø–ª—è—Ä TreeVisualizer
- –î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
window.familyTree.findRootFamilies() // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ—Ä–Ω–µ–π
window.treeViz.render(5) // –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ä–µ–≤–æ –æ—Ç ID 5
```

---

## üå≥ Root Family Selector

### –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ–º—å–∏

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ–º–µ–π–Ω—ã–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ —á–µ—Ä–µ–∑ dropdown –≤ header.

**–ú–µ—Ç–æ–¥ findRootFamilies():**
```javascript
findRootFamilies() {
  // –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ª—é–¥–µ–π –±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π
  const rootPeople = this.people.filter(p => !p.fatherId && !p.motherId);
  
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å—É–ø—Ä—É–∂–µ—Å–∫–∏–µ –ø–∞—Ä—ã
  // –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è (—Å—Ç–∞—Ä—à–∏–µ –ø–µ—Ä–≤—ã–µ)
  
  return families; // [{id, person1, person2, label}, ...]
}
```

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- Dropdown: `<select id="root-selector">` –≤ header
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `window.familyTree` - —ç–∫–∑–µ–º–ø–ª—è—Ä FamilyTreeCore
- `window.treeViz` - —ç–∫–∑–µ–º–ø–ª—è—Ä TreeVisualizer
- –î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## üå≥ Root Family Selector

### –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ–º—å–∏

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–µ–º–µ–π–Ω—ã–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ —á–µ—Ä–µ–∑ dropdown –≤ header.

**–ú–µ—Ç–æ–¥ findRootFamilies():**
```javascript
findRootFamilies() {
  // –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ª—é–¥–µ–π –±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π
  const rootPeople = this.people.filter(p => !p.fatherId && !p.motherId);
  
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å—É–ø—Ä—É–∂–µ—Å–∫–∏–µ –ø–∞—Ä—ã
  // –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è (—Å—Ç–∞—Ä—à–∏–µ –ø–µ—Ä–≤—ã–µ)
  
  return families; // [{id, person1, person2, label}, ...]
}
```

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- Dropdown: `<select id="root-selector">` –≤ header
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `window.familyTree` - —ç–∫–∑–µ–º–ø–ª—è—Ä FamilyTreeCore
- `window.treeViz` - —ç–∫–∑–µ–º–ø–ª—è—Ä TreeVisualizer
- –î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
