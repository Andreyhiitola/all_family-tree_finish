<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="app-header">
    <h1>–°–µ–º–µ–π–Ω–æ–µ –¥—Ä–µ–≤–æ</h1>
    <div class="header-controls">
      <button id="add-person">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
      <button id="show-data-table">üìã –¢–∞–±–ª–∏—Ü–∞</button>
      <button id="import-excel">üì• Excel-import</button>
      <button id="export-excel">üì§ Excel-export</button>
      <button id="clear-data">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
      <button id="show-full-tree">üå≥ –ü–æ–ª–Ω–æ–µ –¥–µ—Ä–µ–≤–æ</button>

      <input id="search" placeholder="üîç –ü–æ–∏—Å–∫...">
    </div>
  </header>

  <main class="app-main">
    <section class="tree-section">
      <div class="tree-container">
        <svg id="tree-svg" width="1200" height="800"></svg>
      </div>
      <div id="auto-save-status">üíæ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</div>
    </section>

    <aside class="info-panel">
      <div class="info-placeholder">üëÜ –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —á–µ–ª–æ–≤–µ–∫—É</div>
      <div class="person-details" style="display:none">
        <h2><span data-field="name"></span> <span data-field="surname"></span></h2>
        <p>–ü–æ–ª: <span data-field="gender"></span></p>
        <p>–†–æ–¥–∏–ª—Å—è: <span data-field="birthDate"></span></p>
        <p>–£–º–µ—Ä: <span data-field="deathDate"></span></p>
        <p>–ú–µ—Å—Ç–æ: <span data-field="birthPlace"></span></p>
        <div class="person-actions">
          <button id="edit-person">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button id="delete-person">üóë –£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
      <div class="stats">
        <p>üë• –í—Å–µ–≥–æ: <span id="total-people">0</span></p>
      </div>
    </aside>
  </main>

  <!-- ‚úÖ –í–û–¢ –≠–¢–û–ì–û –ù–ï –•–í–ê–¢–ê–õ–û: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div id="person-modal" class="modal">
    <div class="modal-content">
      <span class="close" id="cancel-form">&times;</span>
      <h2 id="modal-title">–ü–µ—Ä—Å–æ–Ω–∞</h2>
      <form id="person-form">
        <input type="hidden" id="form-id">
        
        <div class="form-row">
          <label>–ò–º—è:</label>
          <input type="text" id="form-name" required>
        </div>
        <div class="form-row">
          <label>–§–∞–º–∏–ª–∏—è:</label>
          <input type="text" id="form-surname" required>
        </div>
        <div class="form-row">
          <label>–û—Ç—á–µ—Å—Ç–≤–æ:</label>
          <input type="text" id="form-middlename">
        </div>
        <div class="form-row">
          <label>–ü–æ–ª:</label>
          <select id="form-gender">
            <option value="M">–ú—É–∂—Å–∫–æ–π</option>
            <option value="F">–ñ–µ–Ω—Å–∫–∏–π</option>
          </select>
        </div>
        <div class="form-row">
          <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
          <input type="date" id="form-birthDate">
        </div>
        <div class="form-row">
          <label>–î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏:</label>
          <input type="date" id="form-deathDate">
        </div>
        <div class="form-row">
          <label>–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
          <input type="text" id="form-birthPlace">
        </div>
        
        <!-- –°–≤—è–∑–∏ -->
        <div class="form-row">
            <label>–û—Ç–µ—Ü:</label>
            <select id="form-father"><option value="">–ù–µ—Ç</option></select>
        </div>
        <div class="form-row">
            <label>–ú–∞—Ç—å:</label>
            <select id="form-mother"><option value="">–ù–µ—Ç</option></select>
        </div>
        <div class="form-row">
            <label>–°—É–ø—Ä—É–≥(–∞):</label>
            <select id="form-spouse"><option value="">–ù–µ—Ç</option></select>
        </div>

        <!-- –î–æ–ø –ø–æ–ª—è (—á—Ç–æ–±—ã JS –Ω–µ —Ä—É–≥–∞–ª—Å—è –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ –∫–æ–¥–µ) -->
        <input type="hidden" id="form-biography">
        <input type="hidden" id="form-photo">

        <div class="form-buttons">
            <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¢–∞–±–ª–∏—Ü—ã -->
  <div id="data-table-modal" class="modal">
    <div class="modal-content modal-large">
        <span class="close">&times;</span>
        <h2>–¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
        <div style="overflow:auto; max-height:400px;">
            <table id="data-table">
                <thead>
                    <tr>
                        <th>ID</th><th>–ò–º—è</th><th>–§–∞–º–∏–ª–∏—è</th><th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ò–º–ø–æ—Ä—Ç–∞ -->
  <div id="import-modal" class="modal">
      <div class="modal-content">
          <span class="close" id="cancel-import">&times;</span>
          <h2>–ò–º–ø–æ—Ä—Ç Excel</h2>
          <input type="file" id="excel-file" accept=".xlsx, .xls">
      </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –£–¥–∞–ª–µ–Ω–∏—è -->
  <div id="delete-modal" class="modal">
      <div class="modal-content">
          <span class="close" id="cancel-delete">&times;</span>
          <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
          <p id="delete-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
          <button id="confirm-delete" style="background:red; color:white;">–£–¥–∞–ª–∏—Ç—å</button>
      </div>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="d3.v7.min.js"></script>
  <script src="xlsx.full.min.js"></script>
  <script src="FileSaver.min.js"></script>

  <script src="src/core/DataManager.js"></script>
  <script src="src/core/FamilyTree.js"></script>
  <script src="src/core/TreeVisualizer.js"></script>
  <script src="src/utils/importExcel.js"></script>
  <script src="src/utils/exportExcel.js"></script>
  <script src="src/ui/notifications.js"></script>
  <script src="src/ui/forms.js"></script>
  <script src="src/ui/table.js"></script>
  <script src="src/ui/modals.js"></script>
  <script src="src/ui/app.js"></script>
</body>
</html>
